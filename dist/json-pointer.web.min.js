!function(t,n){"function"==typeof define&&define.amd?define([],n):t.JSON.pointer=n()}(this,function(){var t,n,e=function(t,n){function e(){this.constructor=t}for(var u in n)r.call(n,u)&&(t[u]=n[u]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},r={}.hasOwnProperty;return n=function(t){function n(t){var e;e=n.__super__.constructor.call(this,t),this.message=e.message,this.stack=e.stack,this.name=this.constructor.name}return e(n,t),n}(Error),t=function(){function t(n,e,r){switch(arguments.length){case 3:return t.set(n,e,r);case 2:return t.get(n,e);case 1:return t.smartBind({object:n});default:return null}}return t.JsonPointerError=n,t.smartBind=function(n){var e,u,o,s,l,i,a,c,f,p;if(a=n.object,f=n.pointer,c=n.options,u=void 0!==a,s=null!=f,o=null!=c,"string"==typeof f&&(f=this.parse(f)),i=function(t){var n,e,r,u,o,s,l;return null==t&&(t={}),n={},n.hasOwnProp=null!=(e=t.hasOwnProp)?e:c.hasOwnProp,n.getProp=null!=(r=t.getProp)?r:c.getProp,n.setProp=null!=(u=t.setProp)?u:c.setProp,n.getNotFound=null!=(o=t.getNotFound)?o:c.getNotFound,n.setNotFound=null!=(s=t.setNotFound)?s:c.setNotFound,n.delNotFound=null!=(l=t.delNotFound)?l:c.delNotFound,n},e=void 0,u&&s&&o)e=function(n){switch(arguments.length){case 1:return t.set(a,f,n,c);case 0:return t.get(a,f,c);default:return null}},e.set=function(n,e){return a=t.set(a,f,n,i(e))},e.get=function(n){return t.get(a,f,i(n))},e.has=function(n){return t.has(a,f,i(n))},e.del=function(n){return a=t.del(a,f,i(n))};else if(u&&s)e=function(n){switch(arguments.length){case 1:return t.set(a,f,n);case 0:return t.get(a,f);default:return null}},e.set=function(n,e){return a=t.set(a,f,n,e)},e.get=function(n){return t.get(a,f,n)},e.has=function(n){return t.has(a,f,n)},e.del=function(n){return a=t.del(a,f,n)};else if(u&&o)e=function(n,e){switch(arguments.length){case 2:return t.set(a,n,e,c);case 1:return t.get(a,n,c);default:return null}},e.set=function(n,e,r){return a=t.set(a,n,e,i(r))},e.get=function(n,e){return t.get(a,n,i(e))},e.has=function(n,e){return t.has(a,n,i(e))},e.del=function(n,e){return a=t.del(a,n,i(e))};else if(s&&o)e=function(n,e){switch(arguments.length){case 2:return t.set(n,f,e,c);case 1:return t.get(n,f,c);default:return null}},e.set=function(n,e,r){return t.set(n,f,e,i(r))},e.get=function(n,e){return t.get(n,f,i(e))},e.has=function(n,e){return t.has(n,f,i(e))},e.del=function(n,e){return t.del(n,f,i(e))};else if(o)e=function(n,r,u){switch(arguments.length){case 3:return t.set(n,r,u,c);case 2:return t.get(n,r,c);case 1:return e.smartBind({object:n});default:return null}},e.set=function(n,e,r,u){return t.set(n,e,r,i(u))},e.get=function(n,e,r){return t.get(n,e,i(r))},e.has=function(n,e,r){return t.has(n,e,i(r))},e.del=function(n,e,r){return t.del(n,e,i(r))};else if(u)e=function(n,e){switch(arguments.length){case 2:return t.set(a,n,e);case 1:return t.get(a,n);default:return null}},e.set=function(n,e,r){return a=t.set(a,n,e,r)},e.get=function(n,e){return t.get(a,n,e)},e.has=function(n,e){return t.has(a,n,e)},e.del=function(n,e){return a=t.del(a,n,e)};else{if(!s)return this;e=function(n,e){switch(arguments.length){case 2:return t.set(n,f,e);case 1:return t.get(n,f);default:return null}},e.set=function(n,e,r){return t.set(n,f,e,r)},e.get=function(n,e){return t.get(n,f,e)},e.has=function(n,e){return t.has(n,f,e)},e.del=function(n,e){return t.del(n,f,e)}}e.smartBind=function(n){var e;return e={},{}.hasOwnProperty.call(n,"object")?e.object=n.object:u&&(e.object=a),{}.hasOwnProperty.call(n,"pointer")?e.pointer=n.pointer:s&&(e.pointer=f),{}.hasOwnProperty.call(n,"options")?e.options=i(n.options):u&&(e.options=c),t.smartBind(e)};for(l in t)r.call(t,l)&&(p=t[l],{}.hasOwnProperty.call(e,l)||(e[l]=p));return e},t.escape=function(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")},t.unescape=function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")},t.parse=function(e){if(""===e)return[];if("/"!==e.charAt(0))throw new n("Invalid JSON pointer: "+e);return e.substring(1).split("/").map(t.unescape)},t.compile=function(n){return n.map(function(n){return"/"+t.escape(n)}).join("")},t.hasJsonProp=function(t,n){return Array.isArray(t)?"number"==typeof n&&n<t.length:"object"==typeof t?{}.hasOwnProperty.call(t,n):!1},t.hasOwnProp=function(t,n){return{}.hasOwnProperty.call(t,n)},t.hasProp=function(t,n){return n in t},t.getProp=function(t,n){return t[n]},t.setProp=function(t,n,e){return t[n]=e},t.getNotFound=function(t,n,e,r,u){return void 0},t.setNotFound=function(t,n,e,r,u){return r[u+1].match(/^(?:0|[1-9]\d*|-)$/)?t[n]=[]:t[n]={}},t.delNotFound=function(t,n,e,r,u){return void 0},t.errorNotFound=function(e,r,u,o,s){throw new n("Unable to find json path: "+t.compile(o.slice(0,s+1)))},t.set=function(n,e,r,u){var o,s,l,i,a,c,f,p,d,h,g,P;if("string"==typeof e&&(e=t.parse(e)),0===e.length)return r;for(s=null!=(a=null!=u?u.hasProp:void 0)?a:t.hasJsonProp,o=null!=(c=null!=u?u.getProp:void 0)?c:t.getProp,P=null!=(f=null!=u?u.setProp:void 0)?f:t.setProp,g=null!=(p=null!=u?u.setNotFound:void 0)?p:t.setNotFound,d=n,l=0,i=e.length;l!==i;){if(h=e[l],++l,"-"===h&&Array.isArray(n)?h=n.length:h.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(h=parseInt(h,10)),l===i){P(n,h,r);break}n=s(n,h)?o(n,h):g(n,h,d,e,l-1)}return d},t.get=function(n,e,r){var u,o,s,l,i,a,c,f,p,d;for("string"==typeof e&&(e=t.parse(e)),s=null!=(a=null!=r?r.hasProp:void 0)?a:t.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:t.getProp,u=null!=(f=null!=r?r.getNotFound:void 0)?f:t.getNotFound,p=n,l=0,i=e.length;l!==i;){if(d=e[l],++l,"-"===d&&Array.isArray(n)?d=n.length:d.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(d=parseInt(d,10)),!s(n,d))return u(n,d,p,e,l-1);n=o(n,d)}return n},t.del=function(n,e,r){var u,o,s,l,i,a,c,f,p,d;if("string"==typeof e&&(e=t.parse(e)),0===e.length)return void 0;for(s=null!=(a=null!=r?r.hasProp:void 0)?a:t.hasJsonProp,o=null!=(c=null!=r?r.getProp:void 0)?c:t.getProp,u=null!=(f=null!=r?r.delNotFound:void 0)?f:t.delNotFound,p=n,l=0,i=e.length;l!==i;){if(d=e[l],++l,"-"===d&&Array.isArray(n)?d=n.length:d.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(d=parseInt(d,10)),!s(n,d)){u(n,d,p,e,l-1);break}if(l===i){delete n[d];break}n=o(n,d)}return p},t.has=function(n,e,r){var u,o,s,l,i,a,c;for("string"==typeof e&&(e=t.parse(e)),o=null!=(i=null!=r?r.hasProp:void 0)?i:t.hasJsonProp,u=null!=(a=null!=r?r.getProp:void 0)?a:t.getProp,s=0,l=e.length;s!==l;){if(c=e[s],++s,"-"===c&&Array.isArray(n)?c=n.length:c.match(/^(?:0|[1-9]\d*)$/)&&Array.isArray(n)&&(c=parseInt(c,10)),!o(n,c))return!1;n=u(n,c)}return!0},t}()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tcG9pbnRlci53ZWIuanMiLCJqc29uLXBvaW50ZXIuY29mZmVlIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiSlNPTiIsInBvaW50ZXIiLCJ0aGlzIiwiSnNvblBvaW50ZXIiLCJKc29uUG9pbnRlckVycm9yIiwiZXh0ZW5kIiwiY2hpbGQiLCJwYXJlbnQiLCJjdG9yIiwiY29uc3RydWN0b3IiLCJrZXkiLCJoYXNQcm9wMSIsImNhbGwiLCJwcm90b3R5cGUiLCJfX3N1cGVyX18iLCJoYXNPd25Qcm9wZXJ0eSIsInN1cGVyQ2xhc3MiLCJtZXNzYWdlIiwiYmFzZSIsInN0YWNrIiwibmFtZSIsIkVycm9yIiwib2JqZWN0IiwidmFsdWUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzZXQiLCJnZXQiLCJzbWFydEJpbmQiLCJhcmciLCJhcGkiLCJoYXNPYmoiLCJoYXNPcHQiLCJoYXNQdHIiLCJtZXJnZU9wdGlvbnMiLCJvYmoiLCJvcHQiLCJwdHIiLCJ2YWwiLCJvcHRpb25zIiwicGFyc2UiLCJvdmVycmlkZSIsIm8iLCJyZWYiLCJyZWYxIiwicmVmMiIsInJlZjMiLCJyZWY0IiwicmVmNSIsImhhc093blByb3AiLCJnZXRQcm9wIiwic2V0UHJvcCIsImdldE5vdEZvdW5kIiwic2V0Tm90Rm91bmQiLCJkZWxOb3RGb3VuZCIsImhhcyIsImRlbCIsImVzY2FwZSIsInNlZ21lbnQiLCJyZXBsYWNlIiwidW5lc2NhcGUiLCJzdHIiLCJjaGFyQXQiLCJzdWJzdHJpbmciLCJzcGxpdCIsIm1hcCIsImNvbXBpbGUiLCJzZWdtZW50cyIsImpvaW4iLCJoYXNKc29uUHJvcCIsIkFycmF5IiwiaXNBcnJheSIsImhhc1Byb3AiLCJpU2VnbWVudCIsIm1hdGNoIiwiZXJyb3JOb3RGb3VuZCIsInNsaWNlIiwibGVuIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiJDQUFFLFNBQVNBLEVBQU1DLEdBQ08sa0JBQVhDLFNBQXlCQSxPQUFPQyxJ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LE1BQUFKLEVBQUFBLEVBQUFpQyxRQUFBLFFBQUE3QixFQUE2QnhDLEVBQVlrRSxZQUN6Q25CLEVBQUEsT0FBQU4sRUFBQSxNQUFBTCxFQUFBQSxFQUFBVyxRQUFBLFFBQUFOLEVBQTZCekMsRUFBWStDLFFBRXpDdUIsRUFBVyxFQUNYSSxFQUFNNUUsRUFBUXdCLE9BQ1JnRCxJQUFZSSxHQUFsQixDQVNFLEdBUkFuQixFQUFVekQsRUFBUXdFLEtBQ2hCQSxFQUVZLE1BQVhmLEdBQW1CWSxNQUFNQyxRQUFRcEMsR0FDbEN1QixFQUFVdkIsRUFBSVYsT0FDUmlDLEVBQVFnQixNQUFNLHFCQUF3QkosTUFBTUMsUUFBUXBDLEtBQzFEdUIsRUFBVW9CLFNBQVNwQixFQUFTLE1BRXZCYyxFQUFRckMsRUFBS3VCLEdBQ2xCLE9BQU8sQ0FFVHZCLEdBQU1lLEVBQVFmLEVBQUt1QixHQUVyQixPQUFPLEdEK0tGdkQiLCJmaWxlIjoianNvbi1wb2ludGVyLndlYi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsImNsYXNzIEpzb25Qb2ludGVyRXJyb3IgZXh0ZW5kcyBFcnJvclxyXG4gIGNvbnN0cnVjdG9yOiAobWVzc2FnZSkgLT5cclxuICAgIGJhc2UgPSBzdXBlcihtZXNzYWdlKVxyXG5cclxuICAgIEBtZXNzYWdlID0gYmFzZS5tZXNzYWdlXHJcbiAgICBAc3RhY2sgPSBiYXNlLnN0YWNrXHJcbiAgICBAbmFtZSA9IEBjb25zdHJ1Y3Rvci5uYW1lXHJcblxyXG5jbGFzcyBKc29uUG9pbnRlclxyXG4gIEBKc29uUG9pbnRlckVycm9yOiBKc29uUG9pbnRlckVycm9yXHJcblxyXG4gICMjI1xyXG4gICMgQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGNob29zaW5nIGJldHdlZW4gYC5zbWFydEJpbmRgLCBgLmdldGAsIGFuZCBgLnNldGAsIGRlcGVuZGluZyBvbiB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cy5cclxuICAjXHJcbiAgIyBAcGFyYW0geyp9IG9iamVjdFxyXG4gICMgQHBhcmFtIHtzdHJpbmd9IHBvaW50ZXJcclxuICAjIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAjIEByZXR1cm5zIHsqfSBldmFsdWF0aW9uIG9mIHRoZSBwcm94aWVkIG1ldGhvZFxyXG4gICMjI1xyXG4gIGNvbnN0cnVjdG9yOiAob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSkgLT5cclxuICAgIHJldHVybiBzd2l0Y2ggYXJndW1lbnRzLmxlbmd0aFxyXG4gICAgICB3aGVuIDMgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqZWN0LCBwb2ludGVyLCB2YWx1ZSlcclxuICAgICAgd2hlbiAyIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iamVjdCwgcG9pbnRlcilcclxuICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuc21hcnRCaW5kKHsgb2JqZWN0OiBvYmplY3QgfSlcclxuICAgICAgZWxzZSBudWxsXHJcblxyXG4gICMjI1xyXG4gICMgQ3JlYXRlcyBhIGNsb25lIG9mIHRoZSBhcGksIHdpdGggYC4vLmdldC8uaGFzLy5zZXQvLmRlbC8uc21hcnRCaW5kYCBtZXRob2Qgc2lnbmF0dXJlcyBhZGp1c3RlZC5cclxuICAjIFRoZSBzbWFydEJpbmQgbWV0aG9kIGlzIGN1bXVsYXRpdmUsIG1lYW5pbmcgdGhhdCBgLnNtYXJ0QmluZCh7IG9iamVjdDogeH0pLnNtYXJ0QmluZCh7IHBvaW50ZXI6IHkgfSlgIHdpbGwgYmVoYXZlIGFzIGV4cGVjdGVkLlxyXG4gICNcclxuICAjIEBwYXJhbSB7T2JqZWN0fSBiaW5kaW5nc1xyXG4gICMgQHBhcmFtIHsqfSBiaW5kaW5ncy5vYmplY3RcclxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBiaW5kaW5ncy5wb2ludGVyXHJcbiAgIyBAcGFyYW0ge09iamVjdH0gYmluZGluZ3Mub3B0aW9uc1xyXG4gICMgQHJldHVybnMge0pzb25Qb2ludGVyfVxyXG4gICMjI1xyXG4gIEBzbWFydEJpbmQ6ICh7IG9iamVjdDogb2JqLCBwb2ludGVyOiBwdHIsIG9wdGlvbnM6IG9wdCB9KSAtPlxyXG4gICAgIyBXaGF0IGFyZSBiaW5kaW5nP1xyXG4gICAgaGFzT2JqID0gb2JqICE9IHVuZGVmaW5lZFxyXG4gICAgaGFzUHRyID0gcHRyP1xyXG4gICAgaGFzT3B0ID0gb3B0P1xyXG5cclxuICAgICMgTGV0cyBub3QgcGFyc2UgdGhpcyBldmVyeSB0aW1lIVxyXG4gICAgaWYgdHlwZW9mIHB0ciA9PSAnc3RyaW5nJ1xyXG4gICAgICBwdHIgPSBAcGFyc2UocHRyKVxyXG5cclxuICAgICMgZGVmYXVsdCBvcHRpb25zIGhhdmUgY2hhbmdlZFxyXG4gICAgbWVyZ2VPcHRpb25zID0gKG92ZXJyaWRlID0ge30pIC0+XHJcbiAgICAgIG8gPSB7fVxyXG5cclxuICAgICAgby5oYXNPd25Qcm9wID0gb3ZlcnJpZGUuaGFzT3duUHJvcCA/IG9wdC5oYXNPd25Qcm9wXHJcbiAgICAgIG8uZ2V0UHJvcCA9IG92ZXJyaWRlLmdldFByb3AgPyBvcHQuZ2V0UHJvcFxyXG4gICAgICBvLnNldFByb3AgPSBvdmVycmlkZS5zZXRQcm9wID8gb3B0LnNldFByb3BcclxuICAgICAgby5nZXROb3RGb3VuZCA9IG92ZXJyaWRlLmdldE5vdEZvdW5kID8gb3B0LmdldE5vdEZvdW5kXHJcbiAgICAgIG8uc2V0Tm90Rm91bmQgPSBvdmVycmlkZS5zZXROb3RGb3VuZCA/IG9wdC5zZXROb3RGb3VuZFxyXG4gICAgICBvLmRlbE5vdEZvdW5kID0gb3ZlcnJpZGUuZGVsTm90Rm91bmQgPyBvcHQuZGVsTm90Rm91bmRcclxuXHJcbiAgICAgIHJldHVybiBvXHJcblxyXG4gICAgYXBpID0gdW5kZWZpbmVkXHJcblxyXG4gICAgIyBFdmVyeSBjb21iaW5hdGlvbiBvZiBiaW5kaW5nc1xyXG4gICAgaWYgaGFzT2JqIGFuZCBoYXNQdHIgYW5kIGhhc09wdFxyXG4gICAgICBhcGkgPSAodmFsdWUpIC0+XHJcbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXHJcbiAgICAgICAgICB3aGVuIDAgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcclxuICAgICAgICAgIGVsc2UgbnVsbFxyXG5cclxuICAgICAgYXBpLnNldCA9ICh2YWx1ZSwgb3ZlcnJpZGUpIC0+IG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5nZXQgPSAob3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcclxuICAgICAgYXBpLmhhcyA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxyXG4gICAgICBhcGkuZGVsID0gKG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICBlbHNlIGlmIGhhc09iaiBhbmQgaGFzUHRyXHJcbiAgICAgIGFwaSA9ICh2YWx1ZSkgLT5cclxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcclxuICAgICAgICAgIHdoZW4gMSB0aGVuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUpXHJcbiAgICAgICAgICB3aGVuIDAgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXHJcbiAgICAgICAgICBlbHNlIG51bGxcclxuXHJcbiAgICAgIGFwaS5zZXQgPSAodmFsdWUsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSlcclxuICAgICAgYXBpLmdldCA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyLCBvdmVycmlkZSlcclxuICAgICAgYXBpLmhhcyA9IChvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBvdmVycmlkZSlcclxuICAgICAgYXBpLmRlbCA9IChvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSlcclxuICAgIGVsc2UgaWYgaGFzT2JqIGFuZCBoYXNPcHRcclxuICAgICAgYXBpID0gKHB0ciwgdmFsdWUpIC0+XHJcbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXHJcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcclxuICAgICAgICAgIGVsc2UgbnVsbFxyXG5cclxuICAgICAgYXBpLnNldCA9IChwdHIsIHZhbHVlLCBvdmVycmlkZSkgLT4gb2JqID0gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcclxuICAgICAgYXBpLmdldCA9IChwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5oYXMgPSAocHRyLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxyXG4gICAgICBhcGkuZGVsID0gKHB0ciwgb3ZlcnJpZGUpIC0+IG9iaiA9IEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcclxuICAgIGVsc2UgaWYgaGFzUHRyIGFuZCBoYXNPcHRcclxuICAgICAgYXBpID0gKG9iaiwgdmFsdWUpIC0+XHJcbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXHJcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcclxuICAgICAgICAgIGVsc2UgbnVsbFxyXG5cclxuICAgICAgYXBpLnNldCA9IChvYmosIHZhbHVlLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuc2V0KG9iaiwgcHRyLCB2YWx1ZSwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcclxuICAgICAgYXBpLmdldCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBtZXJnZU9wdGlvbnMob3ZlcnJpZGUpKVxyXG4gICAgICBhcGkuZGVsID0gKG9iaiwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmRlbChvYmosIHB0ciwgbWVyZ2VPcHRpb25zKG92ZXJyaWRlKSlcclxuICAgIGVsc2UgaWYgaGFzT3B0XHJcbiAgICAgIGFwaSA9IChvYmosIHB0ciwgdmFsdWUpIC0+XHJcbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICB3aGVuIDMgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvcHQpXHJcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG9wdClcclxuICAgICAgICAgIHdoZW4gMSB0aGVuIGFwaS5zbWFydEJpbmQoeyBvYmplY3Q6IG9iaiB9KVxyXG4gICAgICAgICAgZWxzZSBudWxsXHJcblxyXG4gICAgICBhcGkuc2V0ID0gKG9iaiwgcHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5nZXQgPSAob2JqLCBwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5oYXMgPSAob2JqLCBwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5oYXMob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICAgIGFwaS5kZWwgPSAob2JqLCBwdHIsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG1lcmdlT3B0aW9ucyhvdmVycmlkZSkpXHJcbiAgICBlbHNlIGlmIGhhc09ialxyXG4gICAgICBhcGkgPSAocHRyLCB2YWx1ZSkgLT5cclxuICAgICAgICByZXR1cm4gc3dpdGNoIGFyZ3VtZW50cy5sZW5ndGhcclxuICAgICAgICAgIHdoZW4gMiB0aGVuIEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUpXHJcbiAgICAgICAgICB3aGVuIDEgdGhlbiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIpXHJcbiAgICAgICAgICBlbHNlIG51bGxcclxuXHJcbiAgICAgIGFwaS5zZXQgPSAocHRyLCB2YWx1ZSwgb3ZlcnJpZGUpIC0+IG9iaiA9IEpzb25Qb2ludGVyLnNldChvYmosIHB0ciwgdmFsdWUsIG92ZXJyaWRlKVxyXG4gICAgICBhcGkuZ2V0ID0gKHB0ciwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmdldChvYmosIHB0ciwgb3ZlcnJpZGUpXHJcbiAgICAgIGFwaS5oYXMgPSAocHRyLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuaGFzKG9iaiwgcHRyLCBvdmVycmlkZSlcclxuICAgICAgYXBpLmRlbCA9IChwdHIsIG92ZXJyaWRlKSAtPiBvYmogPSBKc29uUG9pbnRlci5kZWwob2JqLCBwdHIsIG92ZXJyaWRlKVxyXG4gICAgZWxzZSBpZiBoYXNQdHJcclxuICAgICAgYXBpID0gKG9iaiwgdmFsdWUpIC0+XHJcbiAgICAgICAgcmV0dXJuIHN3aXRjaCBhcmd1bWVudHMubGVuZ3RoXHJcbiAgICAgICAgICB3aGVuIDIgdGhlbiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlKVxyXG4gICAgICAgICAgd2hlbiAxIHRoZW4gSnNvblBvaW50ZXIuZ2V0KG9iaiwgcHRyKVxyXG4gICAgICAgICAgZWxzZSBudWxsXHJcblxyXG4gICAgICBhcGkuc2V0ID0gKG9iaiwgdmFsdWUsIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5zZXQob2JqLCBwdHIsIHZhbHVlLCBvdmVycmlkZSlcclxuICAgICAgYXBpLmdldCA9IChvYmosIG92ZXJyaWRlKSAtPiBKc29uUG9pbnRlci5nZXQob2JqLCBwdHIsIG92ZXJyaWRlKVxyXG4gICAgICBhcGkuaGFzID0gKG9iaiwgb3ZlcnJpZGUpIC0+IEpzb25Qb2ludGVyLmhhcyhvYmosIHB0ciwgb3ZlcnJpZGUpXHJcbiAgICAgIGFwaS5kZWwgPSAob2JqLCBvdmVycmlkZSkgLT4gSnNvblBvaW50ZXIuZGVsKG9iaiwgcHRyLCBvdmVycmlkZSlcclxuICAgIGVsc2VcclxuICAgICAgcmV0dXJuIEBcclxuXHJcbiAgICAjIHNtYXJ0QmluZCBoYXMgbmV3IGRlZmF1bHRzXHJcbiAgICBhcGkuc21hcnRCaW5kID0gKG92ZXJyaWRlKSAtPlxyXG4gICAgICBvID0ge31cclxuXHJcbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdvYmplY3QnKVxyXG4gICAgICAgIG8ub2JqZWN0ID0gb3ZlcnJpZGUub2JqZWN0XHJcbiAgICAgIGVsc2UgaWYgaGFzT2JqXHJcbiAgICAgICAgby5vYmplY3QgPSBvYmpcclxuXHJcbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwob3ZlcnJpZGUsICdwb2ludGVyJylcclxuICAgICAgICBvLnBvaW50ZXIgPSBvdmVycmlkZS5wb2ludGVyXHJcbiAgICAgIGVsc2UgaWYgaGFzUHRyXHJcbiAgICAgICAgby5wb2ludGVyID0gcHRyXHJcblxyXG4gICAgICBpZiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG92ZXJyaWRlLCAnb3B0aW9ucycpXHJcbiAgICAgICAgby5vcHRpb25zID0gbWVyZ2VPcHRpb25zKG92ZXJyaWRlLm9wdGlvbnMpXHJcbiAgICAgIGVsc2UgaWYgaGFzT2JqXHJcbiAgICAgICAgby5vcHRpb25zID0gb3B0XHJcblxyXG4gICAgICByZXR1cm4gSnNvblBvaW50ZXIuc21hcnRCaW5kKG8pXHJcblxyXG4gICAgIyBjb3B5IHRoZSByZW1haW5pbmcgbWV0aG9kcyB3aGljaCBkbyBub3QgbmVlZCBiaW5kaW5nXHJcbiAgICBmb3Igb3duIGtleSwgdmFsIG9mIEpzb25Qb2ludGVyXHJcbiAgICAgIGlmIG5vdCB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwaSwga2V5KVxyXG4gICAgICAgIGFwaVtrZXldID0gdmFsXHJcblxyXG4gICAgIyBmaW5hbCByZXN1bHRcclxuICAgIHJldHVybiBhcGlcclxuXHJcbiAgIyMjXHJcbiAgIyBFc2NhcGVzIHRoZSBnaXZlbiBwYXRoIHNlZ21lbnQgYXMgZGVzY3JpYmVkIGJ5IFJGQzY5MDEuXHJcbiAgI1xyXG4gICMgTm90YWJseSwgYCd+J2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJ34wJ2AgYW5kIGAnLydgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+MSdgLlxyXG4gICNcclxuICAjIEBwYXJhbSB7c3RyaW5nfSBzZWdtZW50XHJcbiAgIyBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICMjI1xyXG4gIEBlc2NhcGU6IChzZWdtZW50KSAtPlxyXG4gICAgc2VnbWVudC5yZXBsYWNlKC9+L2csICd+MCcpLnJlcGxhY2UoL1xcLy9nLCAnfjEnKVxyXG5cclxuICAjIyNcclxuICAjIFVuLUVzY2FwZXMgdGhlIGdpdmVuIHBhdGggc2VnbWVudCwgcmV2ZXJzaW5nIHRoZSBhY3Rpb25zIG9mIGAuZXNjYXBlYC5cclxuICAjXHJcbiAgIyBOb3RhYmx5LCBgJ34xJ2AncyBhcmUgcmVwbGFjZWQgd2l0aCBgJy8nYCBhbmQgYCd+MCdgJ3MgYXJlIHJlcGxhY2VkIHdpdGggYCd+J2AuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRcclxuICAjIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgIyMjXHJcbiAgQHVuZXNjYXBlOiAoc2VnbWVudCkgLT5cclxuICAgIHNlZ21lbnQucmVwbGFjZSgvfjEvZywgJy8nKS5yZXBsYWNlKC9+MC9nLCAnficpXHJcblxyXG4gICMjI1xyXG4gICMgUGFyc2VzIGEganNvbi1wb2ludGVyLCBhcyBkZXNyaWJlZCBieSBSRkM5MDEsIGludG8gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cclxuICAjXHJcbiAgIyBAdGhyb3dzIHtKc29uUG9pbnRlckVycm9yfSBmb3IgaW52YWxpZCBqc29uLXBvaW50ZXJzLlxyXG4gICNcclxuICAjIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICAjIEByZXR1cm5zIHtzdHJpbmdbXX1cclxuICAjIyNcclxuICBAcGFyc2U6IChzdHIpIC0+XHJcbiAgICBpZiBzdHIgPT0gJydcclxuICAgICAgcmV0dXJuIFtdXHJcblxyXG4gICAgaWYgc3RyLmNoYXJBdCgwKSAhPSAnLydcclxuICAgICAgdGhyb3cgbmV3IEpzb25Qb2ludGVyRXJyb3IoXCJJbnZhbGlkIEpTT04gcG9pbnRlcjogI3tzdHJ9XCIpXHJcblxyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMSkuc3BsaXQoJy8nKS5tYXAoSnNvblBvaW50ZXIudW5lc2NhcGUpXHJcblxyXG4gICMjI1xyXG4gICMgQ29udmVydHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cyBpbnRvIGEganNvbiBwYXRoLlxyXG4gICMgVGhpcyBtZXRob2QgaXMgdGhlIHJldmVyc2Ugb2YgYC5wYXJzZWAuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcclxuICAjIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgIyMjXHJcbiAgQGNvbXBpbGU6IChzZWdtZW50cykgLT5cclxuICAgIHNlZ21lbnRzLm1hcCgoc2VnbWVudCkgLT4gJy8nICsgSnNvblBvaW50ZXIuZXNjYXBlKHNlZ21lbnQpKS5qb2luKCcnKVxyXG5cclxuICAjIyNcclxuICAjIENhbGxiYWNrIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBjb250YWlucyBhIGdpdmVuIHByb3BlcnR5LlxyXG4gICNcclxuICAjIEBjYWxsYmFjayBoYXNQcm9wXHJcbiAgIyBAcGFyYW0geyp9IG9ialxyXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XHJcbiAgIyBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAjIyNcclxuXHJcbiAgIyMjXHJcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgIGFuZCBgb2JqYCBpcyBlaXRoZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LlxyXG4gICMgSWdub3JlcyB0aGUgcHJvdG90eXBlIGNoYWluLlxyXG4gICNcclxuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmhhc1Byb3BgLlxyXG4gICNcclxuICAjIEBwYXJhbSB7Kn0gb2JqXHJcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcclxuICAjIEByZXR1cm5zIHtCb29sZWFufVxyXG4gICMjI1xyXG4gIEBoYXNKc29uUHJvcDogKG9iaiwga2V5KSAtPlxyXG4gICAgaWYgQXJyYXkuaXNBcnJheShvYmopXHJcbiAgICAgIHJldHVybiAodHlwZW9mIGtleSA9PSAnbnVtYmVyJykgYW5kIChrZXkgPCBvYmoubGVuZ3RoKVxyXG4gICAgZWxzZSBpZiB0eXBlb2Ygb2JqID09ICdvYmplY3QnXHJcbiAgICAgIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KVxyXG4gICAgZWxzZVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgIyMjXHJcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBkaXNyZWdhcmRpbmcgdGhlIHByb3RvdHlwZSBjaGFpbi5cclxuICAjXHJcbiAgIyBAcGFyYW0geyp9IG9ialxyXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XHJcbiAgIyBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAjIyNcclxuICBAaGFzT3duUHJvcDogKG9iaiwga2V5KSAtPlxyXG4gICAge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSlcclxuXHJcbiAgIyMjXHJcbiAgIyBSZXR1cm5zIHRydWUgaWZmIGBvYmpgIGNvbnRhaW5zIGBrZXlgLCBpbmNsdWRpbmcgdmlhIHRoZSBwcm90b3R5cGUgY2hhaW4uXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxyXG4gICMgQHJldHVybnMge0Jvb2xlYW59XHJcbiAgIyMjXHJcbiAgQGhhc1Byb3A6IChvYmosIGtleSkgLT5cclxuICAgIGtleSBvZiBvYmpcclxuXHJcbiAgIyMjXHJcbiAgIyBDYWxsYmFjayB1c2VkIHRvIHJldHJpZXZlIGEgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcclxuICAjXHJcbiAgIyBAY2FsbGJhY2sgZ2V0UHJvcFxyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxyXG4gICMgQHJldHVybnMgeyp9XHJcbiAgIyMjXHJcblxyXG4gICMjI1xyXG4gICMgRmluZHMgdGhlIGdpdmVuIGBrZXlgIGluIGBvYmpgLlxyXG4gICNcclxuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLmdldFByb3BgLlxyXG4gICNcclxuICAjIEBwYXJhbSB7Kn0gb2JqXHJcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcclxuICAjIEByZXR1cm5zIHsqfVxyXG4gICMjI1xyXG4gIEBnZXRQcm9wOiAob2JqLCBrZXkpIC0+XHJcbiAgICBvYmpba2V5XVxyXG5cclxuICAjIyNcclxuICAjIENhbGxiYWNrIHVzZWQgdG8gc2V0IGEgcHJvcGVydHkgb24gYW4gb2JqZWN0LlxyXG4gICNcclxuICAjIEBjYWxsYmFjayBzZXRQcm9wXHJcbiAgIyBAcGFyYW0geyp9IG9ialxyXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0ga2V5XHJcbiAgIyBAcGFyYW0geyp9IHZhbHVlXHJcbiAgIyBAcmV0dXJucyB7Kn1cclxuICAjIyNcclxuXHJcbiAgIyMjXHJcbiAgIyBTZXRzIHRoZSBnaXZlbiBga2V5YCBpbiBgb2JqYCB0byBgdmFsdWVgLlxyXG4gICNcclxuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLnNldFByb3BgLlxyXG4gICNcclxuICAjIEBwYXJhbSB7Kn0gb2JqXHJcbiAgIyBAcGFyYW0ge3N0cmluZ3xpbnRlZ2VyfSBrZXlcclxuICAjIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAjIEByZXR1cm5zIHsqfSBgdmFsdWVgXHJcbiAgIyMjXHJcbiAgQHNldFByb3A6IChvYmosIGtleSwgdmFsdWUpIC0+XHJcbiAgICBvYmpba2V5XSA9IHZhbHVlXHJcblxyXG4gICMjI1xyXG4gICMgQ2FsbGJhY2sgdXNlZCB0byBtb2RpZnkgYmVoYXZpb3VyIHdoZW4gYSBnaXZlbiBwYXRoIHNlZ21lbnQgY2Fubm90IGJlIGZvdW5kLlxyXG4gICNcclxuICAjIEBjYWxsYmFjayBub3RGb3VuZFxyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IGtleVxyXG4gICMgQHJldHVybnMgeyp9XHJcbiAgIyMjXHJcblxyXG4gICMjI1xyXG4gICMgUmV0dXJucyB0aGUgdmFsdWUgdG8gdXNlIHdoZW4gYC5nZXRgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cclxuICAjXHJcbiAgIyBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5nZXROb3RGb3VuZGAuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IHNlZ21lbnRcclxuICAjIEBwYXJhbSB7Kn0gcm9vdFxyXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcclxuICAjIEBwYXJhbSB7aW50ZWdlcn0gaVNlZ21lbnRcclxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAgIyMjXHJcbiAgQGdldE5vdEZvdW5kOiAob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIC0+XHJcbiAgICB1bmRlZmluZWRcclxuXHJcbiAgIyMjXHJcbiAgIyBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2Ugd2hlbiBgLnNldGAgZmFpbHMgdG8gbG9jYXRlIGEgcG9pbnRlciBzZWdtZW50LlxyXG4gICNcclxuICAjIERlZmF1bHQgdmFsdWUgZm9yIGBvcHRpb25zLnNldE5vdEZvdW5kYC5cclxuICAjXHJcbiAgIyBAcGFyYW0geyp9IG9ialxyXG4gICMgQHBhcmFtIHtzdHJpbmd8aW50ZWdlcn0gc2VnbWVudFxyXG4gICMgQHBhcmFtIHsqfSByb290XHJcbiAgIyBAcGFyYW0ge3N0cmluZ1tdfSBzZWdtZW50c1xyXG4gICMgQHBhcmFtIHtpbnRlZ2VyfSBpU2VnbWVudFxyXG4gICMgQHJldHVybnMge3VuZGVmaW5lZH1cclxuICAjIyNcclxuICBAc2V0Tm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cclxuICAgIGlmIHNlZ21lbnRzW2lTZWdtZW50ICsgMV0ubWF0Y2goL14oPzowfFsxLTldXFxkKnwtKSQvKVxyXG4gICAgICByZXR1cm4gb2JqW3NlZ21lbnRdID0gW11cclxuICAgIGVsc2VcclxuICAgICAgcmV0dXJuIG9ialtzZWdtZW50XSA9IHt9XHJcblxyXG4gICMjI1xyXG4gICMgUGVyZm9ybXMgYW4gYWN0aW9uIHdoZW4gYC5kZWxgIGZhaWxzIHRvIGxvY2F0ZSBhIHBvaW50ZXIgc2VnbWVudC5cclxuICAjXHJcbiAgIyBEZWZhdWx0IHZhbHVlIGZvciBgb3B0aW9ucy5kZWxOb3RGb3VuZGAuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IHNlZ21lbnRcclxuICAjIEBwYXJhbSB7Kn0gcm9vdFxyXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcclxuICAjIEBwYXJhbSB7aW50ZWdlcn0gaVNlZ21lbnRcclxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAgIyMjXHJcbiAgQGRlbE5vdEZvdW5kOiAob2JqLCBzZWdtZW50LCByb290LCBzZWdtZW50cywgaVNlZ21lbnQpIC0+XHJcbiAgICB1bmRlZmluZWRcclxuXHJcbiAgIyMjXHJcbiAgIyBSYWlzZXMgYSBKc29uUG9pbnRlckVycm9yIHdoZW4gdGhlIGdpdmVuIHBvaW50ZXIgc2VnbWVudCBpcyBub3QgZm91bmQuXHJcbiAgI1xyXG4gICMgTWF5IGJlIHVzZWQgaW4gcGxhY2Ugb2YgdGhlIGFib3ZlIG1ldGhvZHMgdmlhIHRoZSBgb3B0aW9uc2AgYXJndW1lbnQgb2YgYC4vLmdldC8uc2V0Ly5oYXMvLmRlbC8uc2ltcGxlQmluZGAuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfGludGVnZXJ9IHNlZ21lbnRcclxuICAjIEBwYXJhbSB7Kn0gcm9vdFxyXG4gICMgQHBhcmFtIHtzdHJpbmdbXX0gc2VnbWVudHNcclxuICAjIEBwYXJhbSB7aW50ZWdlcn0gaVNlZ21lbnRcclxuICAjIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAgIyMjXHJcbiAgQGVycm9yTm90Rm91bmQ6IChvYmosIHNlZ21lbnQsIHJvb3QsIHNlZ21lbnRzLCBpU2VnbWVudCkgLT5cclxuICAgIHRocm93IG5ldyBKc29uUG9pbnRlckVycm9yKFwiVW5hYmxlIHRvIGZpbmQganNvbiBwYXRoOiAje0pzb25Qb2ludGVyLmNvbXBpbGUoc2VnbWVudHMuc2xpY2UoMCwgaVNlZ21lbnQrMSkpfVwiKVxyXG5cclxuICAjIyNcclxuICAjIFNldHMgdGhlIGxvY2F0aW9uIGluIGBvYmplY3RgLCBzcGVjaWZpZWQgYnkgYHBvaW50ZXJgLCB0byBgdmFsdWVgLlxyXG4gICMgSWYgYHBvaW50ZXJgIHJlZmVycyB0byB0aGUgd2hvbGUgZG9jdW1lbnQsIGB2YWx1ZWAgaXMgcmV0dXJuZWQgd2l0aG91dCBtb2RpZnlpbmcgYG9iamVjdGAsXHJcbiAgIyBvdGhlcndpc2UsIGBvYmplY3RgIG1vZGlmaWVkIGFuZCByZXR1cm5lZC5cclxuICAjXHJcbiAgIyBCeSBkZWZhdWx0LCBpZiBhbnkgbG9jYXRpb24gc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCBkb2VzIG5vdCBleGlzdCwgdGhlIGxvY2F0aW9uIGlzIGNyZWF0ZWQgdXNpbmcgb2JqZWN0cyBhbmQgYXJyYXlzLlxyXG4gICMgQXJyYXlzIGFyZSB1c2VkIG9ubHkgd2hlbiB0aGUgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHBhdGggc2VnbWVudCBpcyBhbiBhcnJheSBlbGVtZW50IGFzIGRlZmluZWQgYnkgdGhlIHN0YW5kYXJkLlxyXG4gICNcclxuICAjIEBwYXJhbSB7Kn0gb2JqXHJcbiAgIyBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gcG9pbnRlclxyXG4gICMgQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAjIEBwYXJhbSB7aGFzUHJvcH0gb3B0aW9ucy5oYXNQcm9wXHJcbiAgIyBAcGFyYW0ge2dldFByb3B9IG9wdGlvbnMuZ2V0UHJvcFxyXG4gICMgQHBhcmFtIHtzZXRQcm9wfSBvcHRpb25zLnNldFByb3BcclxuICAjIEBwYXJhbSB7bm90Rm91bmR9IG9wdGlvbnMuZ2V0Tm90Rm91bmRcclxuICAjIEByZXR1cm5zIHsqfVxyXG4gICMjI1xyXG4gIEBzZXQ6IChvYmosIHBvaW50ZXIsIHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgaWYgdHlwZW9mIHBvaW50ZXIgPT0gJ3N0cmluZydcclxuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXHJcblxyXG4gICAgaWYgcG9pbnRlci5sZW5ndGggPT0gMFxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuXHJcbiAgICBoYXNQcm9wID0gb3B0aW9ucz8uaGFzUHJvcCA/IEpzb25Qb2ludGVyLmhhc0pzb25Qcm9wXHJcbiAgICBnZXRQcm9wID0gb3B0aW9ucz8uZ2V0UHJvcCA/IEpzb25Qb2ludGVyLmdldFByb3BcclxuICAgIHNldFByb3AgPSBvcHRpb25zPy5zZXRQcm9wID8gSnNvblBvaW50ZXIuc2V0UHJvcFxyXG4gICAgc2V0Tm90Rm91bmQgPSBvcHRpb25zPy5zZXROb3RGb3VuZCA/IEpzb25Qb2ludGVyLnNldE5vdEZvdW5kXHJcblxyXG4gICAgcm9vdCA9IG9ialxyXG4gICAgaVNlZ21lbnQgPSAwXHJcbiAgICBsZW4gPSBwb2ludGVyLmxlbmd0aFxyXG5cclxuICAgIHdoaWxlIGlTZWdtZW50ICE9IGxlblxyXG4gICAgICBzZWdtZW50ID0gcG9pbnRlcltpU2VnbWVudF1cclxuICAgICAgKytpU2VnbWVudFxyXG5cclxuICAgICAgaWYgc2VnbWVudCA9PSAnLScgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxyXG4gICAgICAgIHNlZ21lbnQgPSBvYmoubGVuZ3RoXHJcbiAgICAgIGVsc2UgaWYgc2VnbWVudC5tYXRjaCgvXig/OjB8WzEtOV1cXGQqKSQvKSBhbmQgQXJyYXkuaXNBcnJheShvYmopXHJcbiAgICAgICAgc2VnbWVudCA9IHBhcnNlSW50KHNlZ21lbnQsIDEwKVxyXG5cclxuICAgICAgaWYgaVNlZ21lbnQgPT0gbGVuXHJcbiAgICAgICAgc2V0UHJvcChvYmosIHNlZ21lbnQsIHZhbHVlKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGVsc2UgaWYgbm90IGhhc1Byb3Aob2JqLCBzZWdtZW50KVxyXG4gICAgICAgIG9iaiA9IHNldE5vdEZvdW5kKG9iaiwgc2VnbWVudCwgcm9vdCwgcG9pbnRlciwgaVNlZ21lbnQgLSAxKVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgb2JqID0gZ2V0UHJvcChvYmosIHNlZ21lbnQpXHJcblxyXG4gICAgcmV0dXJuIHJvb3RcclxuXHJcbiAgIyMjXHJcbiAgIyBGaW5kcyB0aGUgdmFsdWUgaW4gYG9iamAgYXMgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYFxyXG4gICNcclxuICAjIEJ5IGRlZmF1bHQsIHJldHVybnMgdW5kZWZpbmVkIGZvciB2YWx1ZXMgd2hpY2ggY2Fubm90IGJlIGZvdW5kXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXHJcbiAgIyBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICMgQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcclxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXHJcbiAgIyBAcGFyYW0ge25vdEZvdW5kfSBvcHRpb25zLmdldE5vdEZvdW5kXHJcbiAgIyBAcmV0dXJucyB7Kn1cclxuICAjIyNcclxuICBAZ2V0OiAob2JqLCBwb2ludGVyLCBvcHRpb25zKSAtPlxyXG4gICAgaWYgdHlwZW9mIHBvaW50ZXIgPT0gJ3N0cmluZydcclxuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXHJcblxyXG4gICAgaGFzUHJvcCA9IG9wdGlvbnM/Lmhhc1Byb3AgPyBKc29uUG9pbnRlci5oYXNKc29uUHJvcFxyXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXHJcbiAgICBnZXROb3RGb3VuZCA9IG9wdGlvbnM/LmdldE5vdEZvdW5kID8gSnNvblBvaW50ZXIuZ2V0Tm90Rm91bmRcclxuXHJcbiAgICByb290ID0gb2JqXHJcbiAgICBpU2VnbWVudCA9IDBcclxuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoXHJcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cclxuICAgICAgc2VnbWVudCA9IHBvaW50ZXJbaVNlZ21lbnRdXHJcbiAgICAgICsraVNlZ21lbnRcclxuXHJcbiAgICAgIGlmIHNlZ21lbnQgPT0gJy0nIGFuZCBBcnJheS5pc0FycmF5KG9iailcclxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxyXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxyXG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMClcclxuXHJcbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcclxuICAgICAgICByZXR1cm4gZ2V0Tm90Rm91bmQob2JqLCBzZWdtZW50LCByb290LCBwb2ludGVyLCBpU2VnbWVudCAtIDEpXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcclxuXHJcbiAgICByZXR1cm4gb2JqXHJcblxyXG4gICMjI1xyXG4gICMgUmVtb3ZlcyB0aGUgbG9jYXRpb24sIHNwZWNpZmllZCBieSBgcG9pbnRlcmAsIGZyb20gYG9iamVjdGAuXHJcbiAgIyBSZXR1cm5zIHRoZSBtb2RpZmllZCBgb2JqZWN0YCwgb3IgdW5kZWZpbmVkIGlmIHRoZSBgcG9pbnRlcmAgaXMgZW1wdHkuXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXHJcbiAgIyBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICMgQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcclxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXHJcbiAgIyBAcGFyYW0ge25vdEZvdW5kfSBvcHRpb25zLmRlbE5vdEZvdW5kXHJcbiAgIyBAcmV0dXJucyB7Kn1cclxuICAjIyNcclxuICBAZGVsOiAob2JqLCBwb2ludGVyLCBvcHRpb25zKSAtPlxyXG4gICAgaWYgdHlwZW9mIHBvaW50ZXIgPT0gJ3N0cmluZydcclxuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXHJcblxyXG4gICAgaWYgcG9pbnRlci5sZW5ndGggPT0gMFxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcblxyXG4gICAgaGFzUHJvcCA9IG9wdGlvbnM/Lmhhc1Byb3AgPyBKc29uUG9pbnRlci5oYXNKc29uUHJvcFxyXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXHJcbiAgICBkZWxOb3RGb3VuZCA9IG9wdGlvbnM/LmRlbE5vdEZvdW5kID8gSnNvblBvaW50ZXIuZGVsTm90Rm91bmRcclxuXHJcbiAgICByb290ID0gb2JqXHJcbiAgICBpU2VnbWVudCA9IDBcclxuICAgIGxlbiA9IHBvaW50ZXIubGVuZ3RoXHJcbiAgICB3aGlsZSBpU2VnbWVudCAhPSBsZW5cclxuICAgICAgc2VnbWVudCA9IHBvaW50ZXJbaVNlZ21lbnRdXHJcbiAgICAgICsraVNlZ21lbnRcclxuXHJcbiAgICAgIGlmIHNlZ21lbnQgPT0gJy0nIGFuZCBBcnJheS5pc0FycmF5KG9iailcclxuICAgICAgICBzZWdtZW50ID0gb2JqLmxlbmd0aFxyXG4gICAgICBlbHNlIGlmIHNlZ21lbnQubWF0Y2goL14oPzowfFsxLTldXFxkKikkLykgYW5kIEFycmF5LmlzQXJyYXkob2JqKVxyXG4gICAgICAgIHNlZ21lbnQgPSBwYXJzZUludChzZWdtZW50LCAxMClcclxuXHJcbiAgICAgIGlmIG5vdCBoYXNQcm9wKG9iaiwgc2VnbWVudClcclxuICAgICAgICBkZWxOb3RGb3VuZChvYmosIHNlZ21lbnQsIHJvb3QsIHBvaW50ZXIsIGlTZWdtZW50IC0gMSlcclxuICAgICAgICBicmVha1xyXG4gICAgICBlbHNlIGlmIGlTZWdtZW50ID09IGxlblxyXG4gICAgICAgIGRlbGV0ZSBvYmpbc2VnbWVudF1cclxuICAgICAgICBicmVha1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgb2JqID0gZ2V0UHJvcChvYmosIHNlZ21lbnQpXHJcblxyXG4gICAgcmV0dXJuIHJvb3RcclxuXHJcbiAgIyMjXHJcbiAgIyBSZXR1cm5zIHRydWUgaWZmIHRoZSBsb2NhdGlvbiwgc3BlY2lmaWVkIGJ5IGBwb2ludGVyYCwgZXhpc3RzIGluIGBvYmplY3RgXHJcbiAgI1xyXG4gICMgQHBhcmFtIHsqfSBvYmpcclxuICAjIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBwb2ludGVyXHJcbiAgIyBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICMgQHBhcmFtIHtoYXNQcm9wfSBvcHRpb25zLmhhc1Byb3BcclxuICAjIEBwYXJhbSB7Z2V0UHJvcH0gb3B0aW9ucy5nZXRQcm9wXHJcbiAgIyBAcmV0dXJucyB7Kn1cclxuICAjIyNcclxuICBAaGFzOiAob2JqLCBwb2ludGVyLCBvcHRpb25zKSAtPlxyXG4gICAgaWYgdHlwZW9mIHBvaW50ZXIgPT0gJ3N0cmluZydcclxuICAgICAgcG9pbnRlciA9IEpzb25Qb2ludGVyLnBhcnNlKHBvaW50ZXIpXHJcblxyXG4gICAgaGFzUHJvcCA9IG9wdGlvbnM/Lmhhc1Byb3AgPyBKc29uUG9pbnRlci5oYXNKc29uUHJvcFxyXG4gICAgZ2V0UHJvcCA9IG9wdGlvbnM/LmdldFByb3AgPyBKc29uUG9pbnRlci5nZXRQcm9wXHJcblxyXG4gICAgaVNlZ21lbnQgPSAwXHJcbiAgICBsZW4gPSBwb2ludGVyLmxlbmd0aFxyXG4gICAgd2hpbGUgaVNlZ21lbnQgIT0gbGVuXHJcbiAgICAgIHNlZ21lbnQgPSBwb2ludGVyW2lTZWdtZW50XVxyXG4gICAgICArK2lTZWdtZW50XHJcblxyXG4gICAgICBpZiBzZWdtZW50ID09ICctJyBhbmQgQXJyYXkuaXNBcnJheShvYmopXHJcbiAgICAgICAgc2VnbWVudCA9IG9iai5sZW5ndGhcclxuICAgICAgZWxzZSBpZiBzZWdtZW50Lm1hdGNoKC9eKD86MHxbMS05XVxcZCopJC8pIGFuZCBBcnJheS5pc0FycmF5KG9iailcclxuICAgICAgICBzZWdtZW50ID0gcGFyc2VJbnQoc2VnbWVudCwgMTApXHJcblxyXG4gICAgICBpZiBub3QgaGFzUHJvcChvYmosIHNlZ21lbnQpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICBvYmogPSBnZXRQcm9wKG9iaiwgc2VnbWVudClcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=